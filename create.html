<!doctype html>
<html>


<head>

    <meta charset="utf-8">
    <meta name="viewport"
          content="initial-scale=1.0, width=device-width">
    <link href="/favicon.ico"
          rel="icon shortcut"
          type="image/x-icon">
    <link rel="apple-touch-icon"
          href="/favicon.ico">
    <title>Create - Happy New Year Wish</title>

    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Charm">
</head>

<body>

    <form>
        <label>Title : </label>
        <input type="text"
               name="title" />
        <br><br>
        <label>Friend's name : </label>
        <input type="text"
               name="name" />
        <br><br>
        <label>Message : </label>
        <textarea name="msg"
                  rows="5"></textarea>
        <br><br>
        <button type="submit">Create a Link</button>
    </form>

    <br>
    <hr>
    <br>
    <input type="text"
           id="link"
           readonly
           style="width: 90%; color: black;" />
    <br><br>
    <button type="button"
            onclick="copy()"> Copy to Clipboard</button>

    <a type="button"
       id="linkurl"> Open link in new tab</a>



    <script>
        const greets = ["Happy New Year 2023!", "සුභ අලුත් අවුරුද්දක් වේවා 2023!"];
        var title = "";
        const params = new Proxy(new URLSearchParams(window.location.search), {
            get: (searchParams, prop) => searchParams.get(prop),
        });

        var getUrl = window.location;
        var baseUrl = getUrl.protocol + "//" + getUrl.host;

        title += baseUrl;

        if (params.msg)
            title += `&msg='${params.msg}'`;
        if (params.title)
            title += `&title='${params.title}'`;
        if (params.name)
            title += `&name='${params.name}'`;

        document.getElementById("link").value = title;
        document.getElementById("linkurl").href = title;

        function copy() {
            var copyText = document.getElementById("link");
            copyText.select();
            copyText.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(copyText.value);
        }
    </script>

</body>

</html>